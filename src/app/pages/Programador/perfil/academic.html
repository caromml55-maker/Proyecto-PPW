<main class="admin-page" role="main">
  <header class="admin-header" role="banner">
    <div class="header-content">
      <h1>Mi Perfil Profesional</h1>
      <div class="header-actions">
        <button class="btn btn-secondary" routerLink="/programador1"> Inicio</button>
      </div>
    </div>
  </header>

  <div *ngIf="loading" class="select-loading-spinner">
    <div class="spinner-border spinner-border-sm text-primary" role="status">
      <span class="visually-hidden">Cargando...</span>
    </div>
  </div>

  <div class="card-detail" *ngIf="!loading">

    <!-- FOTO -->
    <div class="photo-center">
      <img [src]="data.photoURL || 'https://ui-avatars.com/api/?name=' + (data.displayName || data.name || 'Usuario')" class="profile-img-lg" alt="Foto del programador" />
    </div>

    <div class="form-grid">

      <!-- NOMBRE -->
      <div class="form-group">
        <label>Nombre</label>
        <input type="text" [(ngModel)]="data.displayName" aria-label="Nombre" [disabled]="!isEditing" pattern="[A-Za-z√Å√â√ç√ì√ö√°√©√≠√≥√∫√ë√±\s\']+" maxlength="40" title="Solo letras y espacios" oninput="this.value = this.value.replace(/[^A-Za-z√Å√â√ç√ì√ö√°√©√≠√≥√∫√ë√±\s]/g, '')">
      </div>

      <!-- ESPECIALIDAD -->
      <div class="form-group">
        <label>Especialidad</label>
        <input type="text" [(ngModel)]="data.especialidad"  aria-label="Especialidad" [disabled]="!isEditing" pattern="[A-Za-z√Å√â√ç√ì√ö√°√©√≠√≥√∫√ë√±\s\']+" maxlength="40" title="Solo letras y espacios" oninput="this.value = this.value.replace(/[^A-Za-z√Å√â√ç√ì√ö√°√©√≠√≥√∫√ë√±\s]/g, '')">
      </div>

      <!-- CONTACTO -->
      <div class="form-group">
        <label>Contacto</label>
        <input type="text" [(ngModel)]="data.telefono" aria-label="Tel√©fono" placeholder="099 999 9999" [disabled]="!isEditing" pattern="[0-9]+" maxlength="13" minlength="10" title="Solo n√∫meros, m√≠nimo 10, m√°ximo 13" oninput="this.value = this.value.replace(/[^0-9]/g, '').slice(0,13)" onkeydown="return !['e','E','+','-','.'].includes(event.key)">
      </div>

      <!-- EMAIL -->
      <div class="form-group">
        <label>Email</label>
        <input type="email" aria-label="Email" [(ngModel)]="data.email" [disabled]="true">
      </div>

      <!-- REDES SOCIALES -->
      <div class="form-group full-row">
        <label class="section-label">Redes Sociales</label>

       <div class="social-inputs">
          <input type="text" [(ngModel)]="data.redesSociales.github" aria-label="github" [disabled]="!isEditing" placeholder="https://github.com/..." pattern="https?://.+" #gitCtrl="ngModel">
          <input type="text" [(ngModel)]="data.redesSociales.linkedin" aria-label="linkedin" [disabled]="!isEditing" placeholder="https://linkedin.com/..." pattern="https?://.+" #linkCtrl="ngModel">
          <input type="text" [(ngModel)]="data.redesSociales.portfolio" aria-label="portafolio" [disabled]="!isEditing" placeholder="https://miweb.com" pattern="https?://.+">
      </div>
      </div>

      <!-- DESCRIPCI√ìN -->
      <div class="form-group full-row">
        <label>Descripci√≥n profesional</label>
        <textarea rows="4" [(ngModel)]="data.descripcion" aria-label="descripcion" [disabled]="!isEditing"></textarea>
      </div>
    </div>

    <!-- BOTONES -->
    <div class="action-buttons">
      <button *ngIf="!isEditing" aria-label="Editar perfil" class="btn btn-warning" (click)="isEditing=true">‚úèÔ∏è Editar</button>
      <button *ngIf="isEditing" aria-label="Guardar" class="btn btn-success" (click)="guardar()">üíæ Guardar</button>
      <button *ngIf="isEditing" aria-label="Cancelar edicion" class="btn btn-secondary" (click)="cancel()">Cancelar</button>
    </div>

  </div>
</main>
<router-outlet></router-outlet>